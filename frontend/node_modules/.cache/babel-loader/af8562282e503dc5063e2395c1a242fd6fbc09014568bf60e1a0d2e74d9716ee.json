{"ast":null,"code":"var _jsxFileName = \"D:\\\\study\\\\MAD\\\\AYUL\\\\frontend\\\\src\\\\ui\\\\ItemForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport API from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ItemForm({\n  methods,\n  onDone\n}) {\n  _s();\n  const [methodId, setMethodId] = useState('');\n  const [categoryId, setCategoryId] = useState('');\n  const [title, setTitle] = useState('');\n  const [summary, setSummary] = useState('');\n  const [description, setDescription] = useState('');\n  const [file, setFile] = useState(null);\n  const [categories, setCategories] = useState([]);\n  const [msg, setMsg] = useState('');\n  useEffect(() => {\n    if (!methodId) return setCategories([]);\n    const selected = methods.find(m => m._id === methodId);\n    setCategories((selected === null || selected === void 0 ? void 0 : selected.categories) || []);\n  }, [methodId, methods]);\n  async function uploadFile() {\n    if (!file) return null;\n    const fd = new FormData();\n    fd.append('file', file);\n    const res = await API.post('/api/upload/image', fd, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return res.data;\n  }\n  async function submit(e) {\n    e.preventDefault();\n    try {\n      const uploaded = await uploadFile();\n      const images = uploaded ? [{\n        fileId: uploaded.fileId,\n        filename: uploaded.filename\n      }] : [];\n      await API.post('/api/items', {\n        categoryId,\n        title,\n        summary,\n        description,\n        images,\n        linksTo: []\n      });\n      setMsg('Created');\n      setTitle('');\n      setSummary('');\n      setDescription('');\n      setFile(null);\n      onDone === null || onDone === void 0 ? void 0 : onDone();\n    } catch (e) {\n      var _e$response, _e$response$data;\n      setMsg(((_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.msg) || 'Error creating item');\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: submit,\n    children: [/*#__PURE__*/_jsxDEV(\"select\", {\n      required: true,\n      className: \"w-full p-2 border rounded mb-2\",\n      value: methodId,\n      onChange: e => setMethodId(e.target.value),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Select method\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 1\n      }, this), methods.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: m._id,\n        children: m.name\n      }, m._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 18\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      required: true,\n      className: \"w-full p-2 border rounded mb-2\",\n      value: categoryId,\n      onChange: e => setCategoryId(e.target.value),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Select category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 1\n      }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: c._id,\n        children: c.name\n      }, c._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      required: true,\n      value: title,\n      onChange: e => setTitle(e.target.value),\n      placeholder: \"Title\",\n      className: \"w-full p-2 border rounded mb-2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      value: summary,\n      onChange: e => setSummary(e.target.value),\n      placeholder: \"Summary\",\n      className: \"w-full p-2 border rounded mb-2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      value: description,\n      onChange: e => setDescription(e.target.value),\n      placeholder: \"Description\",\n      className: \"w-full p-2 border rounded mb-2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: e => setFile(e.target.files[0]),\n      className: \"mb-2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"w-full bg-green-600 text-white p-2 rounded\",\n      children: \"Create Item\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 1\n    }, this), msg && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-2\",\n      children: msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 1\n  }, this);\n}\n_s(ItemForm, \"JIljyVcRvgissQOQ+3R6ZpbUXOg=\");\n_c = ItemForm;\nvar _c;\n$RefreshReg$(_c, \"ItemForm\");","map":{"version":3,"names":["React","useState","useEffect","API","jsxDEV","_jsxDEV","ItemForm","methods","onDone","_s","methodId","setMethodId","categoryId","setCategoryId","title","setTitle","summary","setSummary","description","setDescription","file","setFile","categories","setCategories","msg","setMsg","selected","find","m","_id","uploadFile","fd","FormData","append","res","post","headers","data","submit","e","preventDefault","uploaded","images","fileId","filename","linksTo","_e$response","_e$response$data","response","onSubmit","children","required","className","value","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","map","name","c","placeholder","type","files","_c","$RefreshReg$"],"sources":["D:/study/MAD/AYUL/frontend/src/ui/ItemForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport API from \"../api\"; \r\n\r\n\r\nexport default function ItemForm({ methods, onDone }){\r\nconst [methodId, setMethodId] = useState('')\r\nconst [categoryId, setCategoryId] = useState('')\r\nconst [title, setTitle] = useState('')\r\nconst [summary, setSummary] = useState('')\r\nconst [description, setDescription] = useState('')\r\nconst [file, setFile] = useState(null)\r\nconst [categories, setCategories] = useState([])\r\nconst [msg, setMsg] = useState('')\r\n\r\n\r\nuseEffect(()=>{\r\nif(!methodId) return setCategories([])\r\nconst selected = methods.find(m=>m._id===methodId)\r\nsetCategories(selected?.categories || [])\r\n}, [methodId, methods])\r\n\r\n\r\nasync function uploadFile(){\r\nif(!file) return null\r\nconst fd = new FormData();\r\nfd.append('file', file)\r\nconst res = await API.post('/api/upload/image', fd, { headers: { 'Content-Type': 'multipart/form-data' } })\r\nreturn res.data\r\n}\r\n\r\n\r\nasync function submit(e){\r\ne.preventDefault()\r\ntry{\r\nconst uploaded = await uploadFile()\r\nconst images = uploaded ? [{ fileId: uploaded.fileId, filename: uploaded.filename }] : []\r\nawait API.post('/api/items', { categoryId, title, summary, description, images, linksTo: [] })\r\nsetMsg('Created')\r\nsetTitle(''); setSummary(''); setDescription(''); setFile(null)\r\nonDone?.()\r\n}catch(e){ setMsg(e.response?.data?.msg || 'Error creating item') }\r\n}\r\n\r\n\r\nreturn (\r\n<form onSubmit={submit}>\r\n<select required className=\"w-full p-2 border rounded mb-2\" value={methodId} onChange={e=>setMethodId(e.target.value)}>\r\n<option value=\"\">Select method</option>\r\n{methods.map(m=> <option key={m._id} value={m._id}>{m.name}</option>)}\r\n</select>\r\n\r\n\r\n<select required className=\"w-full p-2 border rounded mb-2\" value={categoryId} onChange={e=>setCategoryId(e.target.value)}>\r\n<option value=\"\">Select category</option>\r\n{categories.map(c=> <option key={c._id} value={c._id}>{c.name}</option>)}\r\n</select>\r\n\r\n\r\n<input required value={title} onChange={e=>setTitle(e.target.value)} placeholder=\"Title\" className=\"w-full p-2 border rounded mb-2\" />\r\n<input value={summary} onChange={e=>setSummary(e.target.value)} placeholder=\"Summary\" className=\"w-full p-2 border rounded mb-2\" />\r\n<textarea value={description} onChange={e=>setDescription(e.target.value)} placeholder=\"Description\" className=\"w-full p-2 border rounded mb-2\" />\r\n\r\n\r\n<input type=\"file\" onChange={e=>setFile(e.target.files[0])} className=\"mb-2\" />\r\n\r\n\r\n<button className=\"w-full bg-green-600 text-white p-2 rounded\">Create Item</button>\r\n{msg && <p className=\"mt-2\">{msg}</p>}\r\n</form>\r\n)\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}